## 신뢰성

사용자가 이 서비스를 믿고 사용할 수 있는가?

예시)

- 은행 서비스
  - 5만원을 송금했는데 5천원이 송금되는 문제
- 호텔 예약 서비스
  - 같은 객실에 중복 예약

사용자의 예상과 다르거나 매번 동작이 다르면 서비스를 이탈하므로 일관된 서비스 동작이 되어야 한다

</br>

**신뢰성 정의**

- "시스템이 사용자의 예상대로 매번 정확하고 일관되게 동작하는 특성"

**신뢰성을 높이는 방법**

- **사용자가 예상한대로 기능을 수행해야 한다**
- **무언가 잘못되어도 정확하고 일관되도록 동작해야한다**

</br>

**기능이 얼마나 정확하게 동작하는지 → 정확성**

**데이터의 정합성이 얼마나 잘 맞는지 → 정합성**

- 트랜잭션으로 데이터 정합성 유지
- 명확한 요구사항 정의 & API 응답 에러 일관성
- 테스트 (단위, 통합, AB 테스트)
- 상태 일관성 관리 (Consistency 모델) / 데이터 동기화
- DB 복제 & 데이터 백업

</br>

**무엇이 잘못되어도 정확하게 일관되게 동작한다 → 내결함성**

- 컴포넌트가 장애가 발생해도 일관되게 동작
- 장애는 항상 존재한다
  - 네트워크 오류 / 하드웨어 Fail / 외부 API 호출 실패
- 내결함성을 높일 때 고려해야 하는 것들
  - 입력값 검증 / 예외 처리
  - 멱등성 있는 설계
  - 트랜잭션 롤백 & 분산 트랜잭션 처리
  - 재시도 처리 & Circuit Breaker
  - 장애 상황을 고려한 설계

</br>
</br>

## 신뢰성을 보장할 수 있는 지표

- 먼저 "어떤 기능에서 신뢰성을 보장해야 하는가" 를 생각해야 한다
- MTBF (Mean Time Between Failures)
  - 실패하는 시간 사이의 간격
  - 얼마나 오랫동안 문제없이 동작하는가
  - 서버 실패 로그 사이의 시간을 확인 등
  - 예) 평균 60시간 이상 오류 없이 운영
    - 오류가 발생한다면 왜 발생했고 어떻게 개선했는지
- MTTR (Mean Time To Recovery)
  - 문제가 생겼을때 얼마나 빨리 복구했는가
  - 예) 장애 발생 시 평균 1분 이내에 오류 자동 복구 / 알림 시스템 구축
- 에러율
  - 전체 요청 중 얼마나 오류가 발생하는가
  - 5xx 응답의 비율 등
  - API 실패율 1% 이하 유지
- 데이터 무결성 검사
  - 데이터가 일관되고 정확하게 저장되는가?
  - 현재 잔여 포인트 일치 확인 일배치
- 멱등성
  - 예) 동일한 요청이 여러번 들어와도 포인트가 한번만 적립/차감되도록 멱등성있게 설계
