## 집계 함수

- `COUNT(*)` 는 `NULL` 값을 포함한 테이블의 전체 행 개수를 반환한다
- `COUNT(컬럼명)` 은 해당 컬럼에서 `NULL` 이 아닌 값의 개수만 반환한다
- `SUM()` 과 `AVG()` 는 숫자 컬럼의 합계와 평균을 계산하며 `NULL` 값은 자동으로 제외한다
- `MAX()` 와 `MIN()` 은 컬럼에서 최댓값과 최솟값을 찾는다
- `DISTINCT` 는 `COUNT` 와 함께 사용되어 중복을 제외한 고유한 값의 개수를 센다

</br>
</br>

## GROUP BY - 그룹으로 묶기

- `GROUP BY` 는 특정 컬럼의 값이 같은 행동을 하나의 그룹으로 묶어주는 역할을 한다
- 각 그룹에 집계 함수를 적용하여 그룹별 통계를 계산할 수 있다
- 여러 컬럼을 기준으로 그룹화하여 더 세분화된 분석이 가능하다
- `GROUP BY` 는 `NULL` 값도 하나의 독립된 그룹으로 취급하여 집계한다

</br>
</br>

## GROUP BY - 주의사항

- `GROUP BY` 를 사용하면 `SELECT` 절에는 `GROUP BY` 에 사용된 컬럼이나 집계 함수만 올 수 있다
- 그룹으로 묶으면 여러 행이 하나의 행으로 요약되므로 그룹을 대표할 수 없는 개별 행의 컬럼은 조회할 수 없다

</br>
</br>

## HAVING - 그룹 필터링 (1)

- `HAVING` 절은 `GROUP BY` 로 그룹화된 결과에 대해 조건을 적용하여 필터링하는 역할을 한다
- `WHERE` 절은 그룹화 전에 개별 행을 필터링하므로 집계 함수를 사용할 수 없다
- `HAVING` 절의 조건문에는 `SUM()` `COUNT()` 같은 집계 함수를 사용할 수 있다
- SQL 실행 순서상 `GROUP BY` 다음에 `HAVING` 이 실행된다

</br>
</br>

## HAVING - 그룹 필터링 (2)

- `WHERE` 와 `HAVING` 은 필터링 대상과 시점이 다르다
- `WHERE` 는 그룹화 전 개별 행을 대상으로 하고 `HAVING` 은 그룹화 후 생성된 그룹을 대상으로 한다
- 개별 행에 대한 조건은 `WHERE` / 그룹에 대한 조건은 `HAVING` 에 작성하여 함께 사용할 수 있다

</br>
</br>

## SQL 실행 순서

- SQL 쿼리는 코드 작성 순서가 아닌 정해진 논리적 순서에 따라 실행된다
- **논리적 실행 순서는 `FROM` → `WHERE` → `GROUP BY` → `HAVING` → `SELECT` → `ORDER BY` → `LIMIT` 순서이다**
- 이 실행 순서 때문에 `WHERE` 절에서는 `SELECT` 절에서 만든 별칭을 사용할 수 없지만 `ORDER BY` 절에서는 사용할 수 있다
