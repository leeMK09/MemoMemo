- 스프링은 태생이 기업용 온라인 서비스 기술을 지원하기 위해 탄생했다.
- 대부분의 스프링 애플리케이션은 웹 애플리케이션이다. 물론 웹이 아닌 애플리케이션 개발도 얼마든지 개발할 수 있다
- 웹 애플리케이션은 보통 여러 고객이 동시에 요청을 한다.

</br>

## 왜 싱글톤을 사용해야하는가 ?

- 스프링 프레임워크에서 기본 빈이 싱글톤(Singleton)인 이유는 주로 성능과 자원 효율성 측면에서 최적화를 이루기 위해서입니다.

</br>

### 1. 자원 효율성 

- 싱글톤 빈은 애플리케이션 실행 중 하나의 인스턴스만 생성하여 공유하기 때문에 메모리 사용량이 줄어듭니다.
- 불필요한 객체 생성과 소멸 과정에서 발생하는 오버헤드를 방지할 수 있습니다.

</br>

### 2. 성능 최적화 

- 여러 요청에서 동일한 빈 인스턴스를 공유하므로 객체 생성 비용이 줄어들고, 성능이 향상됩니다.
- 특히 빈 생성에 복잡한 로직이나 의존성 주입 과정이 포함된 경우, 이를 한 번만 수행할 수 있습니다.

</br>

### 3. 상태를 유지하지 않는 빈의 특징과 부합

- 대부분의 스프링 빈은 상태를 가지지 않는 Stateless 객체로 사용되므로, 굳이 매번 새로운 인스턴스를 생성할 필요가 없습니다.
- 예를 들어, Service, Repository 계층의 빈은 주로 데이터를 처리하거나 외부 시스템과 통신하는 역할을 하며, 특정 요청에 종속적인 상태를 가지지 않기 때문에 싱글톤으로 적합합니다.

</br>
</br>

## 싱글톤의 단점은 ?

- 상태 관리 문제 
  - 싱글톤 빈이 상태를 가지게 되면, 여러 쓰레드가 동시에 접근할 경우 동시성 문제가 발생할 수 있음.
- 의도치 않은 메모리 누수 
  - 싱글톤 객체가 너무 많은 자원을 보유하거나, 적절히 해제되지 않는 경우 메모리 누수 가능성.
- 단점 보안 방법
  - 상태를 가지지 않는 Stateless 설계를 유지하거나, 필요하면 요청마다 새로운 인스턴스를 생성하는 Prototype 스코프를 사용.
  - 쓰레드 안전성을 확보하기 위해 동기화 처리나 ThreadLocal 사용을 고려.

</br>
</br>

## 언제 싱글톤을 사용해야하는가 ?

- 싱글톤(Singleton)을 사용해야 하는 경우는 객체를 여러 번 생성하지 않고 애플리케이션 전체에서 동일한 인스턴스를 공유함으로써 성능을 최적화하거나 자원을 효율적으로 관리하려는 상황입니다.

</br>

### 1. 공통적으로 사용되는 로직이나 데이터가 있을 때

- 특정 로직이나 데이터를 여러 컴포넌트에서 공통적으로 사용할 경우, 싱글톤으로 관리하면 일관성을 유지하고 중복 생성 비용을 줄일 수 있습니다.
- 예시
  - Service 계층: 비즈니스 로직을 처리하는 OrderService, UserService 같은 클래스.
  - Repository 계층: 데이터베이스와 통신하는 DAO 클래스.

</br>

### 2. 상태를 가지지 않는 Stateless 객체

- Stateless 객체는 요청별로 특정 상태를 유지하지 않으므로, 여러 요청에서 동일한 인스턴스를 공유해도 문제가 없습니다.
- 예시
  - 암호화/복호화 로직, JSON 직렬화/역직렬화 처리 클래스.
  - 공통 유틸리티 클래스 (e.g., 날짜 포맷터, HTTP 클라이언트 설정 객체).

</br>

### 3. 무거운 객체 생성 비용을 줄이고자 할 때

- 객체 생성에 많은 자원이 필요하거나, 자주 생성되는 객체를 매번 생성하기보다 한 번만 생성해 공유하면 성능이 향상됩니다.
- 예시
  - 데이터베이스 연결 관리 객체 (e.g., DataSource, EntityManagerFactory).
  - 네트워크 연결 관리 객체 (e.g., HTTP Client, Socket Connection Pool).

</br>

### 4. 스레드 간 동기화나 공통 자원 관리

- 여러 쓰레드가 접근해야 하는 공통 자원을 관리하거나 동기화할 필요가 있을 때, 싱글톤이 유용합니다.
- 예시 
  - 로깅 프레임워크 (e.g., SLF4J, Logback).
  - 스레드 풀 관리 객체 (e.g., ExecutorService).
