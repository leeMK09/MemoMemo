EnumMap 은 `java.util` 패키지에 포함된 특수한 `Map` 구현체로, `enum` 타입의 키를 효율적으로 다루기 위해 설계되었습니다.

이를 `HashMap` 과 비교할 때 `EnumMap` 을 사용하는 이유와 장단점을 살펴보겠습니다

</br>
</br>

## EnumMap vs HashMap

`EnumMap` 과 `HashMap` 은 모두 `Map` 인터페이스를 구현하지만, 주요 차이점은 다음과 같습니다

</br>

### 1. 키 타입

- `EnumMap` : 키로 `enum` 타입만 사용할 수 있습니다.
  - `EnumMap` 은 내부적으로 배열을 사용해 enum 키와 값을 저장하므로, 모든 키가 enum 타입이어야 합니다
- `HashMap` : 키로 모든 객체를 사용할 수 있습니다
  - 특정 타입에 제한이 없으며, 다양한 객체를 키로 활용할 수 있습니다

</br>

### 2. 내부 구조 및 성능

- `EnumMap` : 내부적으로 배열을 사용하여 enum 값의 `ordinal()` 을 인덱스로 매핑합니다
  - 즉, enum 의 순서를 사용하여 키를 빠르게 찾을 수 있습니다. 이 때문에 메모리 효율이 좋고 빠른 성능을 보장합니다.
  - 또한 enum 의 유일성 덕분에 추가적인 해시 계산이나 충돌 관리가 필요하지 않습니다
- `HashMap` : 해시 테이블을 기반으로 구현되어 있습니다
  - 해시 계산을 통해 키-값을 매핑하므로, 키의 해시 충돌 문제를 해결하기 위한 추가 작업이 필요합니다
  - 일반적인 경우에도 성능이 괜찮지만, 키의 개수에 따라 성능에 차이가 날 수 있습니다

</br>

### 3. 메모리 효율성

- `EnumMap` : 메모리 효율성이 높습니다
  - 키로 enum 만 사용할 수 있기 때문에, 불필요한 메모리 할당이 줄어듭니다
  - enum 의 고정된 개수 덕분에 배열을 활용하여 내부적으로 데이터를 저장하므로, 메모리 사용량이 최소화됩니다
- `HashMap` : 해시 테이블을 사용하므로 더 많은 메모리를 소비할 수 있습니다
  - 특히 키의 개수가 많아지거나 충돌이 발생하면 해시 테이블의 크기가 커질 수 있습니다

</br>

### 4. 성능

- `EnumMap` : 상수 시간(`O(1)`) 접근이 가능하고, 배열 기반 구조로 인해 매우 빠릅니다
  - 따라서 enum 을 키로 사용할 때는 최적의 성능을 발휘합니다
- `HashMap` : 일반적으로 상수 시간 접근을 제공하지만, 해시 충돌이 발생할 경우 성능이 저하될 수 있습니다
  - 해시 충돌이 발생하면 리스트나 트리 구조를 사용해 키를 검색하게 되어 성능이 떨어질 수 있습니다

</br>
</br>

## EnumMap 의 장점

- 메모리 효율이 높다
  - `EnumMap` 은 내부적으로 배열을 사용해 enum 의 개수만큼 공간을 할당하므로 메모리를 더 적게 사용합니다
- 빠른 성능을 제공한다
  - enum 의 ordinal 값을 사용해 배열의 인덱스로 접근하므로 성능이 매우 빠릅니다
- 타입 안정성을 제공한다
  - 키로 사용할 수 있는 값이 enum 으로 제한되어 있어 잘못된 키를 사용할 가능성이 줄어듭니다

</br>

## EnumMap 의 단점

- 키 타입이 제한적이다
  - 오직 enum 타입만을 키로 사용할 수 있으므로, 다양한 키 타입을 사용해야 하는 상황에는 부적절합니다
- null 키를 허용하지 않는다
  - `EnumMap` 은 `null` 키를 허용하지 않으며, enum 의 고유한 성질에 맞춰 엄격히 동작합니다

</br>

## HashMap 의 장점

- 다양한 키 타입을 사용할 수 있다
  - `HashMap` 은 모든 객체를 키로 사용할 수 있으므로, 범용적인 사용이 가능합니다
- 유연성이 높다
  - 다양한 키와 값을 자유롭게 조합할 수 있어 다양한 데이터 구조를 표현할 때 유리합ㄴ디ㅏ

</br>

## HashMap 의 단점

- 메모리 사용량이 더 크다
  - 해시 테이블을 사용하기 때문에, `EnumMap` 에 비해 더 많은 메모리를 사용할 가능성이 있습니다
- 성능이 다소 저하될 수 있다
  - 해시 충돌이 발생하면, 성능이 떨어질 수 있으며 검색 및 삽입 시 부가 작업이 필요합니다

</br>
</br>

## 언제 EnumMap 을 사용할까?

- enum 값을 키로 사용할 때, `EnumMap` 은 메모리 효율성과 성능 모두에서 `HashMap` 보다 훨씬 우수합니다
- enum 의 각 값에 대한 데이터를 매핑해야 하는 경우, `EnumMap` 은 가장 적합한 선택입니다.
  - 예를 들어, 어떤 설정 값이나 매핑이 한정된 범위의 상수 집합으로 이루어져 있을때 사용하는 것이 좋습니다

예시)

```java
import java.util.EnumMap;
import java.util.Map;

public class Main {
    public static void main(String[] args) {
        // EnumMap 초기화
        Map<Test, String> enumMap = new EnumMap<>(Test.class);

        // 값 추가
        for (Test test : Test.values()) {
            enumMap.put(test, test.name());
        }

        // 결과 출력
        System.out.println(enumMap); // { TEST1 = TEST1, TEST2 = TEST2, TEST3 = TEST3 }
    }
}

enum Test {
    TEST1,
    TEST2,
    TEST3
}
```

이와 같이 `EnumMap` 을 사용하면 간결하고 효율적으로 `enum` 을 키로 사용하는 `Map` 을 생성할 수 있습니다

</br>

## 정리

`enum` 을 키로 사용할 때는 가능하면 `EnumMap` 을 사용하는 것이 좋습니다

`EnumMap` 은 성능, 메모리 효율성, 타입 안정성 등에서 뛰어나며, 특정 enum 값을 키로 사용할 경우에 최적화된 솔루션입니다.
