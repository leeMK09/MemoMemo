- Java 에서 컬렉션 (Collection) 과 스트림 (Stream) 을 통해 연산했을 때의 차이점은 크게 데이터의 저장 방식과 처리 방식에서 나타납니다
- 다음은 두 가지의 주요 차이점 입니다

</br>

---

## 1. 데이터 저장과 반복 방식

- **컬렉션(Collection)**
  - 컬렉션은 데이터를 저장하고 관리하는 데이터 구조입니다. 예를 들어 `List`, `Set` 등이 있습니다
  - 데이터를 하나씩 반복 (iterate) 하면서 처리하는 전통적인 방법을 사용합니다. 예를 들어 `for` 루프나 `Iterator` 를 통해 반복 처리를 수행합니다
  - 내부적으로 데이터를 저장하고 있어 원하는 시점에 데이터를 꺼내어 사용할 수 있습니다
- **스트림(Stream)**
  - 스트림은 컬렉션의 요소들을 연속적이고 일회적으로 처리하기 위한 추상화입니다. 즉, 스트림은 데이터의 흐름이며 데이터를 저장하지 않습니다
  - 스트림 API 는 함수형 스타일의 선언적 프로그래밍을 지원하며 컬렉션 데이터를 연산하기 위해 사용됩니다. 스트림은 데이터 소스(컬렉션, 배열 등)를 추상화하여 처리 파이프라인을 형성합니다
  - 스트림의 연산은 **지연 처리(lazy evaluation)**를 통해 이루어지므로 최종 연산이 호출될 때 모든 연산이 실행됩니다

</br>

## 2. 데이터 처리 방식

- **컬렉션**
  - 컬렉션을 사용한 연산은 **외부 반복(external iteration)** 을 사용합니다 즉, 반복 처리를 개발자가 직접 관리해야 합니다.
    ```java
    List<String> list = Arrays.asList("a", "b", "c");
    for (String item : list) {
      System.out.println(item);
    }
    ```
  - 데이터를 하나씩 꺼내어 반복하기 때문에 **병렬 처리가 어렵고** 직접적으로 구현해야 합니다
- **스트림**
  - 스트림을 사용한 연산은 **내부 반복(internal iteration)** 을 사용합니다 즉, 반복 처리는 스트림 API가 내부적으로 관리합니다
    ```java
    List<String> list = Arrays.asList("a", "b", "c");
    list.stream().forEach(System.out::println);
    ```
  - 스트림 API는 병렬 처리를 지원하기 위해 `parallelStream()` 을 제공합니다. 이를 통해 데이터 처리 속도를 개선할 수 있습니다
    ```java
    list.parallelStream().forEach(System.out::println);
    ```

</br>

## 3. 불변성과 함수 프로그래밍

- **컬렉션**
  - 컬렉션을 사용할 때는 데이터를 직접 수정하거나 상태를 변경할 수 있습니다. 이 때문에 가변 객체로 인해 동시성 문제나 오류가 발생할 수 있습니다
- **스트림**
  - 스트림은 **불변성 (immutability)** 를 지향하며, 데이터를 변형하지 않습니다. 중간 연산은 새로운 스트림을 반환하고, 최종 연산이 호출될 때까지 원본 데이터는 변경되지 않습니다. 스트림의 이러한 특성은 함수형 패러다임과 잘 맞으며 코드의 가독성을 높여줍니다

</br>

## 4. 지연 연산 (Lazy Evaluation)

- **컬렉션**
  - 컬렉션에서의 모든 연산은 즉시 수행됩니다. 데이터르 저장하고 사용할 때마다 즉시 접근할 수 있습니다
- **스트림**
  - 스트림에서의 중간 연산(예: `filter()`, `map()`) 은 **지연(lazy)** 되어 있으며 최종 연산(예: `forEach()`, `collect()`)이 호출될 때 실행됩니다. 이를 통해 불필요한 연산을 줄이고 성능을 최적화할 수 있습니다

</br>

## 5. 병렬 처리와 성능

- **컬렉션**
  - 전통적인 컬렉션 반복은 단일 스레드에서 수행됩니다. 따라서 병렬 처리를 수동으로 구현해야 하며 코드가 복잡해질 수 있습니다
- **스트림**
  - 스트림은 `parallelStream()` 를 사용하여 손쉽게 병렬 처리가 가능합니다. Java 의 Fork/Join 프레임워크를 사용하여 데이터를 병렬로 처리함으로써 성능을 향상시킬 수 있습니다

</br>

## 정리

- 컬렉션은 데이터를 저장하고 관리하는 데 중점을 두며, 외부 반복을 통해 데이터를 처리합니다
- 스트림은 데이터를 일회성으로 처리하기 위한 도구로, 함수형 프로그래밍 스타일을 사용하여 내부 반복과 지연 연산을 통해 최적화된 데이터 처리를 제공합니다. 병렬 처리가 필요한 경우 스트림이 더 효율적입니다

</br>

이 두 개념은 서로 보완적이며 상황에 맞게 사용하는 것이 중요합니다. 컬렉션은 데이터를 저장하고 접근할 때 유용하고, 스트림은 데이터 처리와 변환이 필요할 때 사용하기 좋습니다.

</br>

- [지연 연산의 예시](https://github.com/leeMK09/MemoMemo/blob/main/%E2%98%95%20Java/%EC%A7%80%EC%97%B0%EC%97%B0%EC%82%B0%EC%9D%98%20%EC%98%88%EC%8B%9C.md)
